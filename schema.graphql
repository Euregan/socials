scalar Date

type Item {
  id: Int!
  title: String!
  url: String!
  description: String!
  hasThumbnail: Boolean!
  publishedAt: Date!
  seenAt: Date

  source: Source!
}

enum SourceType {
  Youtube
  RSS
}

type Source {
  id: Int!
  name: String!
  description: String
  hasThumbnail: Boolean!
  type: SourceType!
  remoteId: String!

  user: User!
  items: [Item]!
  groups: [Group]!
}

type Group {
  id: Int!
  name: String!
  icon: String!
  excludeFromGlobalView: Boolean!

  sources: [Source]!
}

type User {
  id: Int!
  email: String!

  admin: Boolean!

  sources: [Source]!
}

type Query {
  unseen: [Item]!
  sources: [Source]!
  groups: [Group]!
  # Admin zone
  youtubeChannels: [Source]!
}

type Mutation {
  signup(email: String!, password: String!): User!
  login(email: String!, password: String!): User!

  markAsSeen(itemId: Int!, seenAt: Date!): Item!
  markAsUnseen(itemId: Int!): Item!

  addRssFeed(url: String!): Source!
  uploadOpml(content: String!): [Source]!
  deleteSource(sourceId: Int!): Source!

  createGroup(
    sourceIds: [Int]!
    name: String!
    icon: String!
    excludeFromGlobalView: Boolean!
  ): Group!
  updateGroup(
    groupId: Int!
    sourceIds: [Int]!
    name: String!
    icon: String!
    excludeFromGlobalView: Boolean!
  ): Group!
  deleteGroup(groupId: Int!): Group!
}
